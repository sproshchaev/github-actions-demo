# GitHub Actions Demo

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **GitHub Actions** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ CI/CD –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ Java-–ø—Ä–æ–µ–∫—Ç–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Maven** –∏ **Docker**.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```text
github-action-demo/
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ ci.yml   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è GitHub Actions
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ main/
‚îÇ       ‚îî‚îÄ‚îÄ java/
‚îÇ           ‚îî‚îÄ‚îÄ com/
‚îÇ               ‚îî‚îÄ‚îÄ prosoft/
‚îÇ                   ‚îî‚îÄ‚îÄ HelloWorld.java  # –û—Å–Ω–æ–≤–Ω–æ–π Java-–∫–ª–∞—Å—Å
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ test/
‚îÇ       ‚îî‚îÄ‚îÄ java/
‚îÇ           ‚îî‚îÄ‚îÄ com/
‚îÇ               ‚îî‚îÄ‚îÄ example/
‚îÇ                   ‚îî‚îÄ‚îÄ HelloWorldTest.java  # –¢–µ—Å—Ç—ã JUnit
‚îú‚îÄ‚îÄ Dockerfile   # Docker-–æ–±—Ä–∞–∑ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ pom.xml   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Maven
```

## üöÄ CI/CD —Å GitHub Actions
–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **GitHub Actions** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤:

1. **–°–±–æ—Ä–∫–∞ –∫–æ–¥–∞** —Å –ø–æ–º–æ—â—å—é Maven
2. **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤**
3. **–°–æ–∑–¥–∞–Ω–∏–µ Docker-–æ–±—Ä–∞–∑–∞**
4. **–ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–∑–∞ –≤ Docker Hub**

### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions
–§–∞–π–ª CI/CD workflow: `.github/workflows/ci.yml`

**–û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Liberica JDK 17**
- –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø–æ–º–æ—â—å—é Maven
- –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
- –°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–∑–∞ –≤ **Docker Hub**

### üîë –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Secrets)
–î–ª—è —Ä–∞–±–æ—Ç—ã —Å **Docker Hub** –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–∞—Ç—å **—Å–µ–∫—Ä–µ—Ç—ã** –≤ GitHub:

| Secret               | –û–ø–∏—Å–∞–Ω–∏–µ                           |
|----------------------|----------------------------------|
| `DOCKER_HUB_USERNAME` | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Docker Hub  |
| `DOCKER_HUB_PASSWORD` | –ü–∞—Ä–æ–ª—å –∏–ª–∏ Access Token         |

### ‚öôÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
#### CI/CD Configuration (ci.yml)
–≠—Ç–æ—Ç YAML —Ñ–∞–π–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π Continuous Integration (CI) –¥–ª—è GitHub Actions.

1. **–¢—Ä–∏–≥–≥–µ—Ä—ã**
    - `on`:
        - `push`: –°—Ü–µ–Ω–∞—Ä–∏–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º `push` –≤ –≤–µ—Ç–∫—É `main`.
        - `pull_request`: –°—Ü–µ–Ω–∞—Ä–∏–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ pull request –≤ –≤–µ—Ç–∫—É `main`.

2. **–ó–∞–¥–∞—á–∏ (jobs)**
    - `build`
        - `runs-on: ubuntu-latest`: –°—Ü–µ–Ω–∞—Ä–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π Ubuntu.

3. **–®–∞–≥–∏ (steps)**
    1. **Checkout code**
        - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ `actions/checkout@v2`, —á—Ç–æ–±—ã –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É.

    2. **Set up JDK 17**
        - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ `actions/setup-java@v2`, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å JDK –≤–µ—Ä—Å–∏–∏ 17 —Å –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–º Liberica –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π x64.

    3. **Build with Maven**
        - –ö–æ–º–∞–Ω–¥–∞ `mvn -B package --file pom.xml` –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –ø—Ä–æ–µ–∫—Ç –∏ —É–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –µ–≥–æ —Å –ø–æ–º–æ—â—å—é Maven.

    4. **Test with Maven**
        - –ö–æ–º–∞–Ω–¥–∞ `mvn test --batch-mode` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–µ—Å—Ç—ã —Å –ø–æ–º–æ—â—å—é Maven.

    5. **Build Docker image**
        - –ö–æ–º–∞–Ω–¥–∞ `docker build . -t github-actions-demo` —Å–æ–∑–¥–∞–µ—Ç –æ–±—Ä–∞–∑ Docker –∏–∑ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –ø–æ–º–µ—á–∞–µ—Ç –µ–≥–æ –∫–∞–∫ `github-actions-demo`.

    6. **Login to Docker Hub**
        - –ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Ö–æ–¥ –≤ Docker Hub —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã) `DOCKER_HUB_USERNAME` –∏ `DOCKER_HUB_PASSWORD`.

    7. **Tag and Push Docker image**
        - –ö–æ–º–∞–Ω–¥–∞ `docker tag` –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–≥ –∫ –æ–±—Ä–∞–∑—É Docker.
        - –ö–æ–º–∞–Ω–¥–∞ `docker push` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞–∑ –Ω–∞ Docker Hub.

#### Dockerfile
```dockerfile
# Use OpenJDK 17 as the base image
FROM openjdk:17-jdk-slim

# Set the working directory
WORKDIR /app

# Copy the built jar file from the target directory
COPY target/github-actions-demo-1.0.jar /app/github-actions-demo.jar

# Command to run the application
CMD ["java", "-jar", "github-actions-demo.jar"]
```

–≠—Ç–æ—Ç Dockerfile –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—Ä–∞–∑ `openjdk:17-jdk-slim` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑–æ–≤–æ–≥–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/app`.
3. –ö–æ–ø–∏—Ä—É–µ—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JAR —Ñ–∞–π–ª –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `target` –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é `java -jar`.

## üõ†Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ
### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```sh
git clone https://github.com/your-username/github-actions-demo.git
cd github-actions-demo
```
### 2Ô∏è‚É£ –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```sh
mvn clean package
```
### 3Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```sh
mvn test
```
### 4Ô∏è‚É£ –ó–∞–ø—É—Å–∫ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```sh
docker build -t github-actions-demo .
docker run -p 8080:8080 github-actions-demo
```

### üê≥ Docker Hub
–û–±—Ä–∞–∑ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ Docker Hub –ø–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Å—ã–ª–∫–µ:

[https://hub.docker.com/r/sproshchaev/github-actions-demo](https://hub.docker.com/r/sproshchaev/github-actions-demo)

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç –Ω–µ –∏–º–µ–µ—Ç –ª–∏—Ü–µ–Ω–∑–∏–∏.
```